{% extends 'core/base.html' %}

{% block title %}Resultados - Redimensiona{% endblock %}

{% block content %}
<h2>Resultados</h2>

<div>
    <h3>Imagen original</h3>
    <img src="{{ image.original_image.url }}" alt="Imagen original" style="max-width: 100%; max-height: 300px;">
    <p>Subida el: {{ image.uploaded_at }}</p>
</div>

<h3>Miniaturas generadas</h3>
<div>
    {% if image.thumbnails.all %}
        {% for thumbnail in image.thumbnails.all %}
        <div>
            <h4>{{ thumbnail.width }}x{{ thumbnail.height }}</h4>
            <img src="{{ thumbnail.file.url }}" alt="Miniatura {{ thumbnail.width }}x{{ thumbnail.height }}" style="max-width: 100%;">
            <p><a href="{{ thumbnail.file.url }}" download>Descargar</a></p>
        </div>
        {% endfor %}
    {% else %}
        <p>Las miniaturas est치n siendo procesadas. Por favor, espera unos momentos y recarga la p치gina.</p>
        <script>
            // Recargar la p치gina autom치ticamente cada 3 segundos
            setTimeout(function() {
                window.location.reload();
            }, 3000);
        </script>
    {% endif %}
</div>

<p><a href="{% url 'core:home' %}">Volver al inicio</a></p>
{% endblock %}